<UserControl x:Class="RegioPlayer.UI.Controls.VideoPlayerControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:ffme="clr-namespace:Unosquare.FFME;assembly=ffme.win">
    
    <Grid Background="Black">
        <ffme:MediaElement x:Name="MediaElement"
                          LoadedBehavior="Manual"
                          UnloadedBehavior="Stop"
                          Stretch="Uniform"
                          StretchDirection="Both"
                          Volume="1.0"
                          IsMuted="False"
                          MediaOpened="MediaElement_MediaOpened"
                          MediaEnded="MediaElement_MediaEnded"
                          MediaFailed="MediaElement_MediaFailed"/>
        
        <!-- Loading overlay -->
        <Grid x:Name="LoadingOverlay" 
              Background="#80000000"
              Visibility="Collapsed">
            <StackPanel HorizontalAlignment="Center" 
                       VerticalAlignment="Center">
                <Ellipse Width="40" Height="40" 
                         Fill="Transparent" 
                         Stroke="White" 
                         StrokeThickness="3"
                         Margin="0,0,0,15">
                    <Ellipse.RenderTransform>
                        <RotateTransform x:Name="LoadingRotation" CenterX="20" CenterY="20"/>
                    </Ellipse.RenderTransform>
                    <Ellipse.Triggers>
                        <EventTrigger RoutedEvent="Loaded">
                            <BeginStoryboard>
                                <Storyboard RepeatBehavior="Forever">
                                    <DoubleAnimation Storyboard.TargetName="LoadingRotation"
                                                   Storyboard.TargetProperty="Angle"
                                                   From="0" To="360" Duration="0:0:1"/>
                                </Storyboard>
                            </BeginStoryboard>
                        </EventTrigger>
                    </Ellipse.Triggers>
                </Ellipse>
                
                <TextBlock Text="Loading video..." 
                           Foreground="White" 
                           FontSize="16"
                           HorizontalAlignment="Center"/>
            </StackPanel>
        </Grid>
    </Grid>
</UserControl>