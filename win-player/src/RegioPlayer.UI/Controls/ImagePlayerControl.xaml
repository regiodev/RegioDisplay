<UserControl x:Class="RegioPlayer.UI.Controls.ImagePlayerControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
    
    <Grid Background="Black">
        <Image x:Name="MainImage"
               Stretch="Uniform"
               StretchDirection="Both"
               RenderOptions.BitmapScalingMode="HighQuality"
               Source="{Binding ImageSource, RelativeSource={RelativeSource AncestorType=UserControl}}"
               Loaded="MainImage_Loaded"
               ImageFailed="MainImage_ImageFailed"/>
        
        <!-- Loading overlay -->
        <Grid x:Name="LoadingOverlay" 
              Background="#80000000"
              Visibility="Visible">
            <StackPanel HorizontalAlignment="Center" 
                       VerticalAlignment="Center">
                <Ellipse Width="40" Height="40" 
                         Fill="Transparent" 
                         Stroke="White" 
                         StrokeThickness="3"
                         Margin="0,0,0,15">
                    <Ellipse.RenderTransform>
                        <RotateTransform x:Name="LoadingRotation" CenterX="20" CenterY="20"/>
                    </Ellipse.RenderTransform>
                    <Ellipse.Triggers>
                        <EventTrigger RoutedEvent="Loaded">
                            <BeginStoryboard>
                                <Storyboard RepeatBehavior="Forever">
                                    <DoubleAnimation Storyboard.TargetName="LoadingRotation"
                                                   Storyboard.TargetProperty="Angle"
                                                   From="0" To="360" Duration="0:0:1"/>
                                </Storyboard>
                            </BeginStoryboard>
                        </EventTrigger>
                    </Ellipse.Triggers>
                </Ellipse>
                
                <TextBlock Text="Loading image..." 
                           Foreground="White" 
                           FontSize="16"
                           HorizontalAlignment="Center"/>
            </StackPanel>
        </Grid>

        <!-- Error overlay -->
        <Grid x:Name="ErrorOverlay"
              Background="#80000000"
              Visibility="Collapsed">
            <StackPanel HorizontalAlignment="Center" 
                       VerticalAlignment="Center">
                <TextBlock Text="âš " 
                           Foreground="#FF6B6B" 
                           FontSize="48"
                           HorizontalAlignment="Center"
                           Margin="0,0,0,15"/>
                
                <TextBlock Text="Failed to load image" 
                           Foreground="White" 
                           FontSize="16"
                           HorizontalAlignment="Center"/>
            </StackPanel>
        </Grid>
    </Grid>
</UserControl>