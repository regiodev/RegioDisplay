<Window x:Class="RegioPlayer.UI.Views.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:views="clr-namespace:RegioPlayer.UI.Views"
        xmlns:sys="clr-namespace:System;assembly=System.Runtime"
        Title="Regio Digital Signage Player"
        Background="Black"
        WindowState="Maximized"
        WindowStyle="None"
        ResizeMode="NoResize"
        Topmost="True">

    <Window.Resources>
        <BooleanToVisibilityConverter x:Key="BoolToVisibilityConverter"/>
        
        <Style TargetType="TextBlock">
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="FontFamily" Value="Segoe UI"/>
        </Style>
    </Window.Resources>

    <Grid>
        <!-- Loading Screen -->
        <Grid x:Name="LoadingContent" 
              Visibility="{Binding IsLoading, Converter={StaticResource BoolToVisibilityConverter}}"
              Background="#1a1a1a">
            <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">
                <Ellipse Width="60" Height="60" 
                         Fill="Transparent" 
                         Stroke="#00ff88" 
                         StrokeThickness="4"
                         Margin="0,0,0,30">
                    <Ellipse.RenderTransform>
                        <RotateTransform x:Name="LoadingRotation" CenterX="30" CenterY="30"/>
                    </Ellipse.RenderTransform>
                    <Ellipse.Triggers>
                        <EventTrigger RoutedEvent="Loaded">
                            <BeginStoryboard>
                                <Storyboard RepeatBehavior="Forever">
                                    <DoubleAnimation Storyboard.TargetName="LoadingRotation"
                                                   Storyboard.TargetProperty="Angle"
                                                   From="0" To="360" Duration="0:0:1"/>
                                </Storyboard>
                            </BeginStoryboard>
                        </EventTrigger>
                    </Ellipse.Triggers>
                </Ellipse>
                
                <TextBlock Text="{Binding StatusMessage}" 
                           FontSize="18" 
                           HorizontalAlignment="Center"
                           Foreground="#cccccc"/>
            </StackPanel>
        </Grid>

        <!-- Pairing Screen -->
        <views:PairingScreen x:Name="PairingContent"
                            DataContext="{Binding PairingViewModel}"
                            Visibility="{Binding Path=DataContext.IsPairing, RelativeSource={RelativeSource AncestorType=Window}, Converter={StaticResource BoolToVisibilityConverter}}"/>

        <!-- Player Screen -->
        <views:PlayerScreen x:Name="PlayerContent"
                           DataContext="{Binding PlayerViewModel}"
                           Visibility="{Binding Path=DataContext.IsPlaying, RelativeSource={RelativeSource AncestorType=Window}, Converter={StaticResource BoolToVisibilityConverter}}"/>

        <!-- Settings Panel (Hidden by default) -->
        <Border x:Name="SettingsContent"
                Background="#CC000000"
                Visibility="{Binding ShowSettings, Converter={StaticResource BoolToVisibilityConverter}}"
                Panel.ZIndex="999">
            <views:SettingsPanel DataContext="{Binding SettingsViewModel}"
                                MaxWidth="800"
                                MaxHeight="600"
                                HorizontalAlignment="Center"
                                VerticalAlignment="Center"/>
        </Border>

        <!-- Status Bar (Always visible at bottom) -->
        <Border Background="#33000000" 
                VerticalAlignment="Bottom" 
                Height="30"
                Panel.ZIndex="100">
            <Grid>
                <TextBlock Text="{Binding StatusMessage}" 
                           FontSize="12" 
                           Foreground="#888888"
                           VerticalAlignment="Center"
                           Margin="10,0"/>
                
                <StackPanel Orientation="Horizontal" 
                           HorizontalAlignment="Right"
                           VerticalAlignment="Center"
                           Margin="0,0,10,0">
                    <TextBlock Text="Regio Player v1.0" 
                               FontSize="10" 
                               Foreground="#666666"
                               Margin="0,0,15,0"/>
                    <TextBlock Text="{Binding Source={x:Static sys:DateTime.Now}, StringFormat='{}{0:HH:mm:ss}'}" 
                               FontSize="12" 
                               Foreground="#888888"/>
                </StackPanel>
            </Grid>
        </Border>
    </Grid>
</Window>