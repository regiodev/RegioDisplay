<UserControl x:Class="RegioPlayer.UI.Views.PairingScreen"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
    
    <UserControl.Resources>
        <BooleanToVisibilityConverter x:Key="BoolToVisibilityConverter"/>
        
        <Style TargetType="TextBlock">
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="FontFamily" Value="Segoe UI"/>
            <Setter Property="TextAlignment" Value="Center"/>
        </Style>
        
        <Style TargetType="Button">
            <Setter Property="Background" Value="#2a2a2a"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="FontFamily" Value="Segoe UI"/>
            <Setter Property="Padding" Value="20,10"/>
            <Setter Property="Margin" Value="5"/>
            <Setter Property="BorderBrush" Value="#555"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="#3a3a3a"/>
                </Trigger>
                <Trigger Property="IsPressed" Value="True">
                    <Setter Property="Background" Value="#1a1a1a"/>
                </Trigger>
            </Style.Triggers>
        </Style>
    </UserControl.Resources>

    <Grid Background="#1a1a1a">
        <Grid.RowDefinitions>
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>

        <!-- Logo/Header Section -->
        <StackPanel Grid.Row="1" HorizontalAlignment="Center" Margin="0,0,0,40">
            <!-- Logo placeholder - could be replaced with actual logo -->
            <Border Background="#00ff88" 
                    Width="120" 
                    Height="60" 
                    CornerRadius="8"
                    Margin="0,0,0,20">
                <TextBlock Text="REGIO" 
                           FontSize="24" 
                           FontWeight="Bold" 
                           Foreground="Black"
                           VerticalAlignment="Center"/>
            </Border>
            
            <TextBlock Text="Digital Signage Player" 
                       FontSize="18" 
                       Foreground="#cccccc"/>
        </StackPanel>

        <!-- Pairing Instructions -->
        <StackPanel Grid.Row="2" HorizontalAlignment="Center" MaxWidth="600">
            <TextBlock Text="Pentru a activa acest ecran, accesează platforma web și folosește codul de împerechere:" 
                       FontSize="20" 
                       Margin="0,0,0,30"
                       TextWrapping="Wrap"/>
            
            <!-- Website URL -->
            <Border Background="#2a2a2a" 
                    CornerRadius="8" 
                    Padding="20,15" 
                    Margin="0,0,0,30">
                <StackPanel Orientation="Horizontal" 
                           HorizontalAlignment="Center">
                    <TextBlock Text="🌐 " 
                               FontSize="20" 
                               Foreground="#00ff88"
                               VerticalAlignment="Center"/>
                    <TextBlock Text="display.regio-cloud.ro" 
                               FontSize="22" 
                               FontWeight="SemiBold" 
                               Foreground="#00ff88"
                               VerticalAlignment="Center"/>
                </StackPanel>
            </Border>
            
            <!-- Pairing Code -->
            <Border Background="#2a2a2a" 
                    CornerRadius="12" 
                    Padding="40,25" 
                    BorderBrush="#00ff88"
                    BorderThickness="2">
                <StackPanel>
                    <TextBlock Text="COD DE ÎMPERECHERE" 
                               FontSize="14" 
                               Foreground="#cccccc" 
                               Margin="0,0,0,10"/>
                    
                    <TextBlock Text="{Binding PairingCode}" 
                               FontSize="56" 
                               FontWeight="Bold" 
                               Foreground="#00ff88" 
                               FontFamily="Consolas"/>
                </StackPanel>
            </Border>
        </StackPanel>

        <!-- Status and Controls -->
        <StackPanel Grid.Row="3" HorizontalAlignment="Center" Margin="0,40,0,0">
            <!-- Status Message -->
            <TextBlock Text="{Binding StatusMessage}" 
                       FontSize="16" 
                       Foreground="#cccccc" 
                       Margin="0,0,0,20"/>
            
            <!-- Loading Animation (visible when pairing) -->
            <StackPanel Orientation="Horizontal" 
                       HorizontalAlignment="Center"
                       Visibility="{Binding IsPairing, Converter={StaticResource BoolToVisibilityConverter}}"
                       Margin="0,0,0,20">
                
                <Ellipse Width="20" Height="20" 
                         Fill="Transparent" 
                         Stroke="#00ff88" 
                         StrokeThickness="2"
                         Margin="0,0,10,0">
                    <Ellipse.RenderTransform>
                        <RotateTransform x:Name="PairingSpinner" CenterX="10" CenterY="10"/>
                    </Ellipse.RenderTransform>
                    <Ellipse.Triggers>
                        <EventTrigger RoutedEvent="Loaded">
                            <BeginStoryboard>
                                <Storyboard RepeatBehavior="Forever">
                                    <DoubleAnimation Storyboard.TargetName="PairingSpinner"
                                                   Storyboard.TargetProperty="Angle"
                                                   From="0" To="360" Duration="0:0:1.5"/>
                                </Storyboard>
                            </BeginStoryboard>
                        </EventTrigger>
                    </Ellipse.Triggers>
                </Ellipse>
                
                <TextBlock Text="Așteaptă împerecherea..." 
                           FontSize="14" 
                           Foreground="#00ff88"
                           VerticalAlignment="Center"/>
            </StackPanel>
            
            <!-- Action Buttons -->
            <StackPanel Orientation="Horizontal" 
                       HorizontalAlignment="Center">
                
                <Button Content="🔄 Generează cod nou" 
                        Command="{Binding GenerateNewCodeCommand}"
                        ToolTip="Generează un cod de împerechere nou"/>
                
                <Button Content="📡 Test conexiune" 
                        Command="{Binding TestConnectionCommand}"
                        ToolTip="Testează conexiunea la server"/>
            </StackPanel>
        </StackPanel>

        <!-- Debug Info (visible only in debug builds) -->
        <Border x:Name="DebugInfo"
                Grid.Row="4"
                Background="#80000000"
                HorizontalAlignment="Right"
                VerticalAlignment="Bottom"
                Margin="20"
                Padding="10"
                CornerRadius="5"
                Visibility="Collapsed">
            <StackPanel>
                <TextBlock Text="DEBUG INFO" 
                           Foreground="#FF6B6B" 
                           FontSize="10" 
                           FontWeight="Bold"
                           Margin="0,0,0,5"/>
                
                <TextBlock Text="{Binding UniqueKey, StringFormat='Unique Key: {0}'}" 
                           Foreground="White" 
                           FontSize="9"
                           TextAlignment="Left"/>
                
                <TextBlock Text="{Binding PairingCode, StringFormat='Pairing Code: {0}'}" 
                           Foreground="White" 
                           FontSize="9"
                           TextAlignment="Left"/>
                
                <TextBlock Text="{Binding IsPairing, StringFormat='Is Pairing: {0}'}" 
                           Foreground="White" 
                           FontSize="9"
                           TextAlignment="Left"/>
            </StackPanel>
        </Border>
    </Grid>
</UserControl>